<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../schemas/TAN-R-tok.rnc" type="application/relax-ng-compact-syntax"?>
<?xml-model href="../schemas/TAN-R-tok.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<TAN-R-tok xmlns="tag:textalign.net,2015:ns" TAN-version="1"
   id="tag:kalvesmaki.com,2015:tokenization:eng.1">
   <head>
      <name>Tokenization pattern for English, in Penn Treebank style</name>
      <desc>This tokenization pattern is designed to imitate the tokenization process followed by
         the Penn Treebank project on modern English texts. Expected input: raw text, one sentence
         at a time.</desc>
      <master-location>http://kalvesmaki.com/tan-library/tan-r-tok/tok.eng.1.xml</master-location>
      <rights-excluding-sources rights-holder="kalvesmaki">
         <IRI>http://creativecommons.org/licenses/by/4.0/deed.en_US</IRI>
         <name>Creative Commons Attribution 4.0 International License</name>
         <desc>This license is granted independent of rights and licenses associated with the
            source. </desc>
      </rights-excluding-sources>
      <see-also>
         <relationship>auxiliary</relationship>
         <IRI>tag:kalvesmaki@gmail.com,2014:auxiliary:tokenizing-sed-script-1</IRI>
         <name>sed tokenizing script, by Robert MacIntyre</name>
         <desc>Written ca. 1995 at the University of Pennsylvania</desc>
         <location when-accessed="2015-03-17"
            >http://www.cis.upenn.edu/~treebank/tokenizer.sed</location>
      </see-also>
      <declarations>
         <for-lang>en</for-lang>
         <for-lang>eng</for-lang>
      </declarations>
      <agent xml:id="kalvesmaki" roles="creator">
         <IRI>http://viaf.org/viaf/299582703</IRI>
         <IRI>tag:kalvesmaki.com,2015:self</IRI>
         <name xml:lang="eng">Joel Kalvesmaki</name>
      </agent>
      <role xml:id="creator">
         <IRI>http://schema.org/creator</IRI>
         <name xml:lang="eng">creator</name>
      </role>
      <change when="2015-03-17" who="kalvesmaki">Started file</change>
   </head>
   <body>
      <replace>
         <comment when="2015-03-17" who="kalvesmaki">get directional quotes</comment>
         <pattern>^"</pattern>
         <replacement>`` </replacement>
      </replace>
      <replace>
         <pattern>([ \(\[{&lt;])"</pattern>
         <replacement>$1 `` </replacement>
      </replace>
      <comment when="2015-03-17" who="kalvesmaki">close quotes at end</comment>
      <replace>
         <pattern>\.\.\.</pattern>
         <replacement>...</replacement>
      </replace>
      <replace>
         <pattern>([,;:@#$%&amp;])</pattern>
         <replacement> $1 </replacement>
      </replace>
      <replace>
         <comment when="2015-03-17" who="kalvesmaki">Offset final periods</comment>
         <pattern>([^.])([.])([\]\)}>"']*)$</pattern>
         <replacement>$1 $2$3</replacement>
      </replace>
      <replace>
         <comment when="2015-03-17" who="kalvesmaki">Offset question marks, exclamation marks, other
            punctuation</comment>
         <pattern>([?!\]\[\(\){}&lt;>—–])</pattern>
         <replacement> $1 </replacement>
      </replace>
      <replace>
         <comment when="2015-03-17" who="kalvesmaki">Offset double hyphens</comment>
         <pattern>--</pattern>
         <replacement> $1 </replacement>
      </replace>
      <replace>
         <comment when="2015-03-17" who="kalvesmaki">Insert opening space, to reduce regex
            searches.</comment>
         <pattern>^(.)</pattern>
         <replacement> $1</replacement>
      </replace>
      <replace>
         <comment when="2015-03-17" who="kalvesmaki">Insert closing space.</comment>
         <pattern>(.)$</pattern>
         <replacement>$1 </replacement>
      </replace>
      <replace>
         <comment when="2015-03-17" who="kalvesmaki">Offset closing quotation marks</comment>
         <pattern>"</pattern>
         <replacement> '' </replacement>
      </replace>
      <replace>
         <comment when="2015-03-17" who="kalvesmaki">Possessive or close single quote</comment>
         <pattern>([^'])' </pattern>
         <replacement>$1 ' </replacement>
      </replace>
      <replace>
         <comment when="2015-03-17" who="kalvesmaki">Separate contracted enclitics, e.g., it's,
            I'm</comment>
         <pattern>'([sSmMdD]) </pattern>
         <replacement> '$1 </replacement>
      </replace>
      <replace>
         <comment when="2015-03-17" who="kalvesmaki">'ll, 're, 've</comment>
         <pattern>'(ll|re|ve) </pattern>
         <replacement> '$1 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <comment when="2015-03-17" who="kalvesmaki">n't</comment>
         <pattern>(n't) </pattern>
         <replacement> $1 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <pattern> (can)(not) </pattern>
         <replacement> $1 $2 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <pattern> (d')(ye) </pattern>
         <replacement> $1 $2 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <pattern> (gim)(me) </pattern>
         <replacement> $1 $2 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <pattern> (gon)(na) </pattern>
         <replacement> $1 $2 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <pattern> (got)(ta) </pattern>
         <replacement> $1 $2 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <pattern> (lem)(me) </pattern>
         <replacement> $1 $2 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <pattern> (more)('n) </pattern>
         <replacement> $1 $2 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <pattern> ('t)(is) </pattern>
         <replacement> $1 $2 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <pattern> ('t)(was) </pattern>
         <replacement> $1 $2 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <pattern> (wan)(na) </pattern>
         <replacement> $1 $2 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <pattern> (whad)(dya) </pattern>
         <replacement> $1 $2 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <pattern> (wha)(t)(cha) </pattern>
         <replacement> $1 $2 $3 </replacement>
         <flags>i</flags>
      </replace>
      <replace>
         <comment when="2015-03-17" who="kalvesmaki">Strip opening and closing space.</comment>
         <pattern>(^\s+|\s+$)</pattern>
         <replacement/>
      </replace>
      <tokenize>
         <pattern>\s+</pattern>
      </tokenize>
      <example>
         <input>"I said, ["Wanna play ping-pong?"></input>
         <output-token>``</output-token>
         <output-token>I</output-token>
         <output-token>said</output-token>
         <output-token>,</output-token>
         <output-token>[</output-token>
         <output-token>``</output-token>
         <output-token>Wan</output-token>
         <output-token>na</output-token>
         <output-token>play</output-token>
         <output-token>ping-pong</output-token>
         <output-token>?</output-token>
         <output-token>''</output-token>
         <output-token>></output-token>
      </example>
   </body>
</TAN-R-tok>
