<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 8. Class 3 TAN Files: Language and Script</title><link rel="stylesheet" type="text/css" href="../../../../css/TAN-guidelines.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"/><link rel="home" href="index.xhtml" title="The Text Alignment Network: Official Guidelines"/><link rel="up" href="pt02.xhtml" title="Part II. Detailed Description"/><link rel="prev" href="ch07s05.xhtml" title="Lexico-Morphology"/><link rel="next" href="ch08s02.xhtml" title="Morphological Concepts and Patterns (TAN-R-mor)"/></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 8. Class 3 TAN Files: Language and Script</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07s05.xhtml">Prev</a> </td><th width="60%" align="center">Part II. Detailed Description</th><td width="20%" align="right"> <a accesskey="n" href="ch08s02.xhtml">Next</a></td></tr></table><hr/></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="class_3"/>Chapter 8. Class 3 TAN Files: Language and Script</h2></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="section"><a href="ch08.xhtml#tan-r-tok">Tokenization Patterns</a></span></dt><dd><dl><dt><span class="section"><a href="ch08.xhtml#d5e5080">Principles and Assumptions</a></span></dt><dt><span class="section"><a href="ch08.xhtml#d5e5093">Rootmost Element and Header</a></span></dt><dt><span class="section"><a href="ch08.xhtml#d5e5117">Data (<code class="code">&lt;body&gt;</code>)</a></span></dt></dl></dd><dt><span class="section"><a href="ch08s02.xhtml">Morphological Concepts and Patterns (TAN-R-mor)</a></span></dt><dd><dl><dt><span class="section"><a href="ch08s02.xhtml#d5e5337">Principles and Assumptions</a></span></dt><dt><span class="section"><a href="ch08s02.xhtml#d5e5352">Rootmost Element and Header</a></span></dt><dt><span class="section"><a href="ch08s02.xhtml#d5e5373">Data (<code class="code">&lt;body&gt;</code>)</a></span></dt></dl></dd></dl></div><p>This chapter discusses class 3 TAN files, which pertain to languages and scripts, not
            to individual texts. This class, at present, consists of rules and patterns pertaining
            to tokenization and morphology. As the network grows, other types are expected to be
            added.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="tan-r-tok"/>Tokenization Patterns</h2></div></div></div><p>The term <span class="italic">word</span> is notoriously difficult to
               define for any language (in English, "New York" and "didn't" can each be justifiably
               defined as one or two words). We adopt instead the proximate term preferred in
               linguistics, <span class="italic">token</span>. A token is essentially a word
               that is defined computationally according to a regular expression, and those regular
               expressions are constructed such that matches approximate what we normally call
               words. For example, we may define a token as any continuous string of word
               characters, <code class="code">\w+</code> (see above, <a class="xref" href="ch04s03.xhtml#regular_expressions" title="Regular Expressions">the section called “Regular Expressions”</a>). </p><p>To <span class="italic">tokenize</span> is to segment a string into a
               sequence of tokens. The segmentation is specified by another regular expression that
               defines the pattern that separates tokens, that is, the opposite or complement set.
               The way we find the tokens made of <code class="code">\w+</code>, our example above, is by
               tokenizing on the complement set, <code class="code">\W+</code>.</p><p>Every TAN-R-tok file is, in essence, a tokenization constructor. It describes zero
               or more preparatory replacement processes, followed by a single tokenizing command,
               so as to create a sequence of words or tokens that can then be referred to by their
               position in the sequence. This is the backbone upon which all class-2 files depend
               for pointing to specific word tokens in one or more class 1 files. Because TAN-R-tok
               files are used extensively by both class 1 and class 2 files, it is important that
               you familiarize yourself with how a TAN-R-tok file will be invoked by them. See <a class="xref" href="ch06s02.xhtml#recommended-tokenizations" title="Recommended Tokenizations">the section called “Recommended Tokenizations”</a> and <a class="xref" href="ch07.xhtml#tokenization">the section called “Class 2 Metadata (<code class="code">&lt;head&gt;</code>)”</a>.</p><p>Tokenization files are either language specific or language agnostic. The latter
               tend to be rather limited in number and size, so for convenience, TAN provides the
               following language-agnostic TAN-R-tok files as standard rules:</p><p>
               </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="code">http://textalign.net/release/1/dev/rules/TAN-R-tok/general-1.xml</code></p></li><li class="listitem"><p><code class="code">http://textalign.net/release/1/dev/rules/TAN-R-tok/general-words-only-1.xml</code></p></li><li class="listitem"><p><code class="code">http://textalign.net/release/1/dev/rules/TAN-R-tok/precise-1.xml</code></p></li></ul></div><p>
            </p><p>For more about these core tokenization patterns and how they are best used, see
               the files themselves.</p><p>Tokenization patterns devoted to specific to languages may be found in the
               examples on the TAN website.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="d5e5080"/>Principles and Assumptions</h3></div></div></div><p>Certain assumptions and recommendations are made regarding tokenization files,
                  complementing the more general ones; see <a class="xref" href="ch01s03.xhtml" title="Design Principles">the section called “Design Principles”</a>.</p><p>TAN-R-tok files are used exclusively to describe how a text should first be
                  changed (if needed) and then tokenized. Editors of these files should be familiar
                  with the writing conventions of the scripts for the languages they are tokenizing
                  and with the behavior of Unicode and Regular Expressions. (See <a class="xref" href="ch04s03.xhtml#unicode" title="Unicode">the section called “Unicode”</a> and <a class="xref" href="ch04s03.xhtml#regular_expressions" title="Regular Expressions">the section called “Regular Expressions”</a>).</p><p>Decisions in tokenizing are motivated by the assumptions one makes about a
                  given language and about the questions that motivates someone to tokenize a text.
                  Some linguists prefer to treat punctuation as tokens in their own right. Others,
                  such as those who work with ancient texts (where much punctuation is erratic,
                  anachronistic, or irrelevant), may wish to suppress them altogether. A poorly
                  chosen or constructed TAN-R-tok file can produce invalid or undesired results. It
                  is of paramount importance that you, as a TAN-R-tok editor, clearly indicate the
                  ideal purposes of the file, both through a description of contents and good
                  examples (at least one of which is required).</p><p>Tokenization will be applied to one leaf <code class="code">&lt;div&gt;</code> at a time, and
                  not to the concatenation of those <code class="code">&lt;div&gt;</code>s. So if a word straddles
                  leaf <code class="code">&lt;div&gt;</code>s, it will always be broken up into two or more tokens.
                  There are work-arounds for these situations, but those fixes should be applied in
                  other TAN formats, not this one.</p><p>TAN-R-tok files do not admit doubt or multiple opinions. </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="d5e5093"/>Rootmost Element and Header</h3></div></div></div><p>The rootmost element of a tokenizing file is
                  <code class="code">&lt;TAN-R-tok&gt;</code>.</p><p>One or more optional <code class="code">&lt;source&gt;</code> elements may describe previous
                  works that have been used as sources for the patterning rules. Many TAN-R-tok
                  files will have no <code class="code">&lt;source&gt;</code> element.</p><p><code class="code">&lt;declarations&gt;</code> takes one or more <code class="code">&lt;for-lang&gt;</code>s
                  that take a standard language code (see <a class="xref" href="ch04s03.xhtml#language" title="xsd:language">xsd:language</a>). If a
                  TAN-R-tok file is meant to apply to any language, no <code class="code">&lt;for-lang&gt;</code>
                  should be supplied. </p><p>If another TAN file does not have all the languages specified in a TAN-R-tok
                  file it is using, a warning will be generated. But the warning will not prevent
                  the data from being processed.</p><p>
                  </p><div class="example"><a id="d5e5107"/><p class="title"><strong>Example 8.1. TAN-R-tok <code class="code">&lt;head&gt;</code>, any language</strong></p><div class="example-contents"><p>
                        </p><pre class="programlisting">      ...........
   &lt;head&gt;
      &lt;name&gt;Common tokenization pattern no. 1&lt;/name&gt;
      &lt;desc&gt;This tokenization pattern takes any text in any language, offsets any contiguous string
         of non-word characters with spaces, then returns a tokenization based on white
         space.&lt;/desc&gt;
      &lt;location&gt;tok.common.1.xml&lt;/location&gt;
      &lt;rights-excluding-sources rights-holder="kalvesmaki"&gt;
         &lt;IRI&gt;http://creativecommons.org/licenses/by/4.0/deed.en_US&lt;/IRI&gt;
         &lt;name&gt;Creative Commons Attribution 4.0 International License&lt;/name&gt;
         &lt;desc&gt;This license is granted independent of rights and licenses associated with the
            source. &lt;/desc&gt;
      &lt;/rights-excluding-sources&gt;
      &lt;declarations/&gt;
      &lt;agent xml:id="park" roles="creator"&gt;
          &lt;IRI&gt;tag:parkj@textalign.net,2015:self&lt;/IRI&gt;
          &lt;name&gt;Jenny Park&lt;/name&gt;
      &lt;/agent&gt;
      &lt;role xml:id="creator"&gt;
         &lt;IRI&gt;http://schema.org/creator&lt;/IRI&gt;
         &lt;name xml:lang="eng"&gt;creator&lt;/name&gt;
      &lt;/role&gt;
      &lt;change when="2015-03-16" who="park"&gt;Started file&lt;/change&gt;
   &lt;/head&gt;
      ...........              </pre><p>
                     </p></div></div><p><br class="example-break"/>
               </p><div class="example"><a id="d5e5112"/><p class="title"><strong>Example 8.2. TAN-R-tok <code class="code">&lt;head&gt;</code>, language-specific</strong></p><div class="example-contents"><p>
                     </p><pre class="programlisting">      ...........
   &lt;head&gt;
      &lt;name&gt;Tokenization pattern for English, in Penn Treebank style&lt;/name&gt;
      &lt;desc&gt;This tokenization pattern is designed to imitate the tokenization process followed by
         the Penn Treebank project on modern English texts. Expected input: raw text, one sentence
         at a time.&lt;/desc&gt;
      &lt;location&gt;tok.eng.1.xml&lt;/location&gt;
      &lt;rights-excluding-sources rights-holder="kalvesmaki"&gt;
         &lt;IRI&gt;http://creativecommons.org/licenses/by/4.0/deed.en_US&lt;/IRI&gt;
         &lt;name&gt;Creative Commons Attribution 4.0 International License&lt;/name&gt;
         &lt;desc&gt;This license is granted independent of rights and licenses associated with the
            source. &lt;/desc&gt;
      &lt;/rights-excluding-sources&gt;
      &lt;see-also&gt;
         &lt;relationship&gt;auxiliary&lt;/relationship&gt;
         &lt;IRI&gt;tag:parkj@textalign.net,2015:auxiliary:tokenizing-sed-script-1&lt;/IRI&gt;
         &lt;name&gt;sed tokenizing script, by Robert MacIntyre&lt;/name&gt;
         &lt;desc&gt;Written ca. 1995 at the University of Pennsylvania&lt;/desc&gt;
         &lt;location when-accessed="2015-03-17"
            &gt;http://www.cis.upenn.edu/~treebank/tokenizer.sed&lt;/location&gt;
      &lt;/see-also&gt;
      &lt;declarations&gt;
         &lt;for-lang&gt;en&lt;/for-lang&gt;
         &lt;for-lang&gt;eng&lt;/for-lang&gt;
      &lt;/declarations&gt;
      &lt;agent xml:id="park" roles="creator"&gt;
          &lt;IRI&gt;tag:parkj@textalign.net,2015:self&lt;/IRI&gt;
          &lt;name&gt;Jenny Park&lt;/name&gt;
      &lt;/agent&gt;
      &lt;role xml:id="creator"&gt;
         &lt;IRI&gt;http://schema.org/creator&lt;/IRI&gt;
         &lt;name xml:lang="eng"&gt;creator&lt;/name&gt;
      &lt;/role&gt;
      &lt;change when="2015-03-17" who="park"&gt;Started file&lt;/change&gt;
   &lt;/head&gt;
      ...........              </pre><p>
                  </p></div></div><br class="example-break"/></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="d5e5117"/>Data (<code class="code">&lt;body&gt;</code>)</h3></div></div></div><p>
                  </p><div class="table"><a id="d5e5121"/><p class="title"><strong>Table 8.1. Synopsis of TAN-R-tok <code class="code">&lt;body&gt;</code>, <code class="code">&lt;replace&gt;</code>,
                           <code class="code">&lt;tokenize&gt;</code>, <code class="code">&lt;pattern&gt;</code>,
                           <code class="code">&lt;replacement&gt;</code>, <code class="code">&lt;flags&gt;</code>,
                           <code class="code">&lt;example&gt;</code>, <code class="code">&lt;input&gt;</code>,
                           <code class="code">&lt;output-token&gt;</code></strong></p><div class="table-contents"><table summary="Synopsis of TAN-R-tok &lt;body&gt;, &lt;replace&gt;,&#xA;                           &lt;tokenize&gt;, &lt;pattern&gt;,&#xA;                           &lt;replacement&gt;, &lt;flags&gt;,&#xA;                           &lt;example&gt;, &lt;input&gt;,&#xA;                           &lt;output-token&gt;" border="1"><colgroup><col class="c1"/><col class="c3"/><col class="c4"/><col class="c5"/><col class="newCol7"/><col class="newCol6"/><col class="c6"/></colgroup><thead><tr><th>name</th><th>req?</th><th>qty</th><th>parent</th><th>attributes</th><th>children</th><th>purpose</th></tr></thead><tbody><tr><td><code class="code">&lt;body&gt;</code></td><td>yes</td><td>one</td><td><code class="code">&lt;TAN-R-tok&gt;</code></td><td><a class="xref" href="ch05s04.xhtml#in_progress" title="@in-progress">the section called “@in-progress”</a>?, <a class="xref" href="ch05.xhtml#edit_stamp" title="Edit Stamp">the section called “Edit Stamp”</a>?</td><td><code class="code">&lt;replace&gt;</code>*, <code class="code">&lt;tokenize&gt;</code>,
                                    <code class="code">&lt;example&gt;</code>+</td><td>contains data</td></tr><tr><td><code class="code">&lt;replace&gt;</code></td><td>no</td><td>one or more</td><td><code class="code">&lt;body&gt;</code></td><td><code class="code">@xpath</code>?, <a class="xref" href="ch05.xhtml#edit_stamp" title="Edit Stamp">the section called “Edit Stamp”</a>?</td><td><code class="code">&lt;pattern&gt;</code>, <code class="code">&lt;replacement&gt;</code>,
                                    <code class="code">&lt;flags&gt;</code>?</td><td>state a pattern to be searched and replaced in a digital
                                 source</td></tr><tr><td><code class="code">&lt;tokenize&gt;</code></td><td>yes</td><td>one</td><td><code class="code">&lt;body&gt;</code></td><td><a class="xref" href="ch05.xhtml#edit_stamp" title="Edit Stamp">the section called “Edit Stamp”</a>?</td><td><code class="code">&lt;pattern&gt;</code>, <code class="code">&lt;flags&gt;</code>? </td><td>declares tokenization function to be applied to a
                                 string</td></tr><tr><td><code class="code">&lt;pattern&gt;</code></td><td>yes</td><td>one</td><td><code class="code">&lt;replace&gt;</code>, <code class="code">&lt;tokenize&gt;</code></td><td><a class="xref" href="ch05.xhtml#edit_stamp" title="Edit Stamp">the section called “Edit Stamp”</a>?</td><td>data (xsd:string)</td><td>state through a regular expression a pattern to be
                                 found</td></tr><tr><td><code class="code">&lt;replacement&gt;</code></td><td>yes</td><td>one</td><td><code class="code">&lt;replace&gt;</code></td><td><a class="xref" href="ch05.xhtml#edit_stamp" title="Edit Stamp">the section called “Edit Stamp”</a>?</td><td>data (xsd:string)</td><td>state through a regular expression a replacement
                                 pattern</td></tr><tr><td><code class="code">&lt;flags&gt;</code></td><td>no</td><td>one</td><td><code class="code">&lt;replace&gt;</code>, <code class="code">&lt;tokenize&gt;</code></td><td><a class="xref" href="ch05.xhtml#edit_stamp" title="Edit Stamp">the section called “Edit Stamp”</a>?</td><td>data (xsd:string)</td><td>declare flags to be applied in a replace operation</td></tr><tr><td><code class="code">&lt;example&gt;</code></td><td>yes</td><td>one or more</td><td><code class="code">&lt;body&gt;</code></td><td><a class="xref" href="ch05.xhtml#edit_stamp" title="Edit Stamp">the section called “Edit Stamp”</a>?</td><td><code class="code">&lt;input&gt;</code>,
                                 <code class="code">&lt;output-token&gt;</code>+</td><td>Provide an example of a tokenized string</td></tr><tr><td><code class="code">&lt;input&gt;</code></td><td>yes</td><td>one</td><td><code class="code">&lt;example&gt;</code></td><td><a class="xref" href="ch05.xhtml#edit_stamp" title="Edit Stamp">the section called “Edit Stamp”</a>?</td><td>data (xsd:string)</td><td>Provide example input</td></tr><tr><td><code class="code">&lt;output-token&gt;</code></td><td>yes</td><td>one or more</td><td><code class="code">&lt;example&gt;</code></td><td><a class="xref" href="ch05.xhtml#edit_stamp" title="Edit Stamp">the section called “Edit Stamp”</a>?</td><td>data (xsd:string)</td><td>Provide example output token</td></tr></tbody></table></div></div><p><br class="table-break"/>
               </p><p>The <code class="code">&lt;body&gt;</code> of a TAN-R-tok file takes the customary optional
                  attributes found in other TAN files (see <a class="xref" href="ch05s04.xhtml#in_progress" title="@in-progress">the section called “@in-progress”</a> and <a class="xref" href="ch05.xhtml#edit_stamp" title="Edit Stamp">the section called “Edit Stamp”</a>). <code class="code">&lt;body&gt;</code> has only three kinds of
                  children: zero or more <code class="code">&lt;replace&gt;</code>s followed by one
                     <code class="code">&lt;tokenize&gt;</code> followed by one or more <code class="code">&lt;example&gt;</code>s
                  .</p><p><code class="code">&lt;replace&gt;</code> corresponds to <code class="code">fn:replace</code> as defined in
                     <a class="link" href="http://www.w3.org/TR/xpath-functions-30/#func-replace" target="_top">XPath
                     Functions 3.0</a>. <code class="code">&lt;replace&gt;</code> may take an optional
                     <code class="code">@xpath</code> value, to restrict the scope of the replacement to a
                  specific place in a valid XML source.</p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="img/caution.png"/></td><th align="left">Caution</th></tr><tr><td align="left" valign="top"><p>Using <code class="code">@xpath</code> is not recommended if you anticipate users who
                        may be relying upon XSLT 2.0 and earlier for transformations. Only from
                        version 3.0 has XPath been able to convert a string datatype (the datatype
                        of <code class="code">@xpath</code>) into an XPath expression.</p></td></tr></table></div><p>
                  <code class="code">&lt;replace&gt;</code> must take one <code class="code">&lt;pattern&gt;</code> and one
                     <code class="code">&lt;replacement&gt;</code>, two regular expressions (see <a class="xref" href="ch04s03.xhtml#regular_expressions" title="Regular Expressions">the section called “Regular Expressions”</a>) to be fed as parameters into an XPath
                     <code class="code">fn:replace</code> function. It may take an optional
                     <code class="code">&lt;flags&gt;</code>, which adds parameters to the search, i.e., any
                  combination of <code class="code">&lt;s&gt;</code> ("dot-all" mode), <code class="code">&lt;m&gt;</code>
                  (multi-line mode), <code class="code">&lt;i&gt;</code> (case-insensitive mode),
                     <code class="code">&lt;x&gt;</code> (strip white spaces from <code class="code">&lt;pattern&gt;</code>), or
                     <code class="code">&lt;q&gt;</code> (suppress metacharacters) as values, <a class="link" href="http://www.w3.org/TR/xpath-functions-30/#flags" target="_top">explained in
                     greater detail in the W3C recommendation</a>.</p><p>Multiple <code class="code">&lt;replace&gt;</code> values will be applied according to document
                  order. It is very important to be careful to anticipate ways an early search might
                  adversely affect a later one.</p><p>Each <code class="code">&lt;tokenize&gt;</code> has exactly one <code class="code">&lt;pattern&gt;</code>
                  element and an optional <code class="code">&lt;flags&gt;</code> element. The values of these two
                  elements, both strings, represent regular expressions that should be used as
                  parameters for <code class="code">fn:tokenize</code> as defined in <a class="link" href="http://www.w3.org/TR/xpath-functions-30/#func-tokenize" target="_top">XPath
                     Functions 3.0</a>. The value of <code class="code">&lt;pattern&gt;</code> is a regular
                  expression that will be used to segment a leaf <code class="code">&lt;div&gt;</code> into a
                  sequence of tokens; <code class="code">&lt;flags&gt;</code> takes the same options
                     <code class="code">&lt;replace&gt;</code> does.</p><p>Finally, one or more <code class="code">&lt;example&gt;</code> elements provide one
                     <code class="code">&lt;input&gt;</code> and one or more <code class="code">&lt;output-token&gt;</code>s.
                     <code class="code">&lt;input&gt;</code> takes any string, and the resultant sequence of tokens
                  is supplied in <code class="code">&lt;output-token&gt;</code>. If <code class="code">&lt;input&gt;</code>, when
                  fed into the sequence of <code class="code">&lt;replace&gt;</code>s and
                  <code class="code">&lt;tokenize&gt;</code>, does not produce the sequence declared by the
                     <code class="code">&lt;output-token&gt;</code>s, an error will be generated.</p><div class="example"><a id="d5e5316"/><p class="title"><strong>Example 8.3. TAN-R-tok <code class="code">&lt;body&gt;</code>, treating punctuation clusters as word
                     tokens</strong></p><div class="example-contents"><p>
                     </p><pre class="programlisting">      ...........
   &lt;body&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-16" who="park"&gt;Pad every cluster of non-word characters with
            space.&lt;/comment&gt;
         &lt;pattern&gt;(\W+)&lt;/pattern&gt;
         &lt;replacement&gt; $1 &lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-16" who="park"&gt;Delete end spaces.&lt;/comment&gt;
         &lt;pattern&gt;^\s+|\s+$&lt;/pattern&gt;
         &lt;replacement/&gt;
      &lt;/replace&gt;
      &lt;tokenize&gt;
         &lt;pattern&gt;\s+&lt;/pattern&gt;
      &lt;/tokenize&gt;
      &lt;example&gt;
         &lt;input&gt;I said, "Where is the ping-pong table?"&lt;/input&gt;
         &lt;output-token&gt;I&lt;/output-token&gt;
         &lt;output-token&gt;said&lt;/output-token&gt;
         &lt;output-token&gt;,&lt;/output-token&gt;
         &lt;output-token&gt;"&lt;/output-token&gt;
         &lt;output-token&gt;Where&lt;/output-token&gt;
         &lt;output-token&gt;is&lt;/output-token&gt;
         &lt;output-token&gt;the&lt;/output-token&gt;
         &lt;output-token&gt;ping&lt;/output-token&gt;
         &lt;output-token&gt;-&lt;/output-token&gt;
         &lt;output-token&gt;pong&lt;/output-token&gt;
         &lt;output-token&gt;table&lt;/output-token&gt;
         &lt;output-token&gt;?"&lt;/output-token&gt;
      &lt;/example&gt;
   &lt;/body&gt;
      ...........              </pre><p>
                  </p></div></div><br class="example-break"/><div class="example"><a id="d5e5321"/><p class="title"><strong>Example 8.4. TAN-R-tok <code class="code">&lt;body&gt;</code>, ignoring punctuation</strong></p><div class="example-contents"><p>
                     </p><pre class="programlisting">      ...........
   &lt;body&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-16" who="park"&gt;Remove end nonword characters&lt;/comment&gt;
         &lt;pattern&gt;^\W+|\W+$&lt;/pattern&gt;
         &lt;replacement/&gt;
      &lt;/replace&gt;
      &lt;tokenize&gt;
         &lt;comment when="2015-03-16" who="park"&gt;Tokenize on any cluster of nonword
            characters.&lt;/comment&gt;
         &lt;pattern&gt;\W+&lt;/pattern&gt;
      &lt;/tokenize&gt;
      &lt;example&gt;
         &lt;input&gt;I said, "Where is the ping-pong table?"&lt;/input&gt;
         &lt;output-token&gt;I&lt;/output-token&gt;
         &lt;output-token&gt;said&lt;/output-token&gt;
         &lt;output-token&gt;Where&lt;/output-token&gt;
         &lt;output-token&gt;is&lt;/output-token&gt;
         &lt;output-token&gt;the&lt;/output-token&gt;
         &lt;output-token&gt;ping&lt;/output-token&gt;
         &lt;output-token&gt;pong&lt;/output-token&gt;
         &lt;output-token&gt;table&lt;/output-token&gt;
      &lt;/example&gt;
   &lt;/body&gt;
      ...........              </pre><p>
                  </p></div></div><br class="example-break"/><div class="example"><a id="d5e5326"/><p class="title"><strong>Example 8.5. TAN-R-tok <code class="code">&lt;body&gt;</code>, tokenizing English in the manner of the
                     Penn Treebank project</strong></p><div class="example-contents"><p>
                     </p><pre class="programlisting">      ...........
   &lt;body&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-17" who="park"&gt;get directional quotes&lt;/comment&gt;
         &lt;pattern&gt;^"&lt;/pattern&gt;
         &lt;replacement&gt;`` &lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt;([ \(\[{&amp;lt;])"&lt;/pattern&gt;
         &lt;replacement&gt;$1 `` &lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;comment when="2015-03-17" who="park"&gt;close quotes at end&lt;/comment&gt;
      &lt;replace&gt;
         &lt;pattern&gt;\.\.\.&lt;/pattern&gt;
         &lt;replacement&gt;...&lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt;([,;:@#$%&amp;amp;])&lt;/pattern&gt;
         &lt;replacement&gt; $1 &lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-17" who="park"&gt;Offset final periods&lt;/comment&gt;
         &lt;pattern&gt;([^.])([.])([\]\)}&gt;"']*)$&lt;/pattern&gt;
         &lt;replacement&gt;$1 $2$3&lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-17" who="park"&gt;Offset question marks, exclamation marks, other
            punctuation&lt;/comment&gt;
         &lt;pattern&gt;([?!\]\[\(\){}&amp;lt;&gt;—–])&lt;/pattern&gt;
         &lt;replacement&gt; $1 &lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-17" who="park"&gt;Offset double hyphens&lt;/comment&gt;
         &lt;pattern&gt;--&lt;/pattern&gt;
         &lt;replacement&gt; $1 &lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-17" who="park"&gt;Insert opening space, to reduce regex
            searches.&lt;/comment&gt;
         &lt;pattern&gt;^(.)&lt;/pattern&gt;
         &lt;replacement&gt; $1&lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-17" who="park"&gt;Insert closing space.&lt;/comment&gt;
         &lt;pattern&gt;(.)$&lt;/pattern&gt;
         &lt;replacement&gt;$1 &lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-17" who="park"&gt;Offset closing quotation marks&lt;/comment&gt;
         &lt;pattern&gt;"&lt;/pattern&gt;
         &lt;replacement&gt; '' &lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-17" who="park"&gt;Possessive or close single quote&lt;/comment&gt;
         &lt;pattern&gt;([^'])' &lt;/pattern&gt;
         &lt;replacement&gt;$1 ' &lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-17" who="park"&gt;Separate contracted enclitics, e.g., it's,
            I'm&lt;/comment&gt;
         &lt;pattern&gt;'([sSmMdD]) &lt;/pattern&gt;
         &lt;replacement&gt; '$1 &lt;/replacement&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-17" who="park"&gt;'ll, 're, 've&lt;/comment&gt;
         &lt;pattern&gt;'(ll|re|ve) &lt;/pattern&gt;
         &lt;replacement&gt; '$1 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-17" who="park"&gt;n't&lt;/comment&gt;
         &lt;pattern&gt;(n't) &lt;/pattern&gt;
         &lt;replacement&gt; $1 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt; (can)(not) &lt;/pattern&gt;
         &lt;replacement&gt; $1 $2 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt; (d')(ye) &lt;/pattern&gt;
         &lt;replacement&gt; $1 $2 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt; (gim)(me) &lt;/pattern&gt;
         &lt;replacement&gt; $1 $2 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt; (gon)(na) &lt;/pattern&gt;
         &lt;replacement&gt; $1 $2 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt; (got)(ta) &lt;/pattern&gt;
         &lt;replacement&gt; $1 $2 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt; (lem)(me) &lt;/pattern&gt;
         &lt;replacement&gt; $1 $2 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt; (more)('n) &lt;/pattern&gt;
         &lt;replacement&gt; $1 $2 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt; ('t)(is) &lt;/pattern&gt;
         &lt;replacement&gt; $1 $2 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt; ('t)(was) &lt;/pattern&gt;
         &lt;replacement&gt; $1 $2 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt; (wan)(na) &lt;/pattern&gt;
         &lt;replacement&gt; $1 $2 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt; (whad)(dya) &lt;/pattern&gt;
         &lt;replacement&gt; $1 $2 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;pattern&gt; (wha)(t)(cha) &lt;/pattern&gt;
         &lt;replacement&gt; $1 $2 $3 &lt;/replacement&gt;
         &lt;flags&gt;i&lt;/flags&gt;
      &lt;/replace&gt;
      &lt;replace&gt;
         &lt;comment when="2015-03-17" who="park"&gt;Strip opening and closing space.&lt;/comment&gt;
         &lt;pattern&gt;(^\s+|\s+$)&lt;/pattern&gt;
         &lt;replacement/&gt;
      &lt;/replace&gt;
      &lt;tokenize&gt;
         &lt;pattern&gt;\s+&lt;/pattern&gt;
      &lt;/tokenize&gt;
      &lt;example&gt;
         &lt;input&gt;"I said, ["Wanna play ping-pong?"&gt;&lt;/input&gt;
         &lt;output-token&gt;``&lt;/output-token&gt;
         &lt;output-token&gt;I&lt;/output-token&gt;
         &lt;output-token&gt;said&lt;/output-token&gt;
         &lt;output-token&gt;,&lt;/output-token&gt;
         &lt;output-token&gt;[&lt;/output-token&gt;
         &lt;output-token&gt;``&lt;/output-token&gt;
         &lt;output-token&gt;Wan&lt;/output-token&gt;
         &lt;output-token&gt;na&lt;/output-token&gt;
         &lt;output-token&gt;play&lt;/output-token&gt;
         &lt;output-token&gt;ping-pong&lt;/output-token&gt;
         &lt;output-token&gt;?&lt;/output-token&gt;
         &lt;output-token&gt;''&lt;/output-token&gt;
         &lt;output-token&gt;&gt;&lt;/output-token&gt;
      &lt;/example&gt;
   &lt;/body&gt;
      ...........              </pre><p>
                  </p></div></div><br class="example-break"/></div></div></div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07s05.xhtml">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="pt02.xhtml">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch08s02.xhtml">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Lexico-Morphology </td><td width="20%" align="center"><a accesskey="h" href="index.xhtml">Home</a></td><td width="40%" align="right" valign="top"> Morphological Concepts and Patterns (TAN-R-mor)</td></tr></table></div></body></html>